<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minimal Calculator + Tip Split</title>
    <link rel="manifest" href="./manifest.webmanifest" />
    <meta name="theme-color" content="#0b0f14" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <link rel="apple-touch-icon" href="./icons/apple-touch-icon.png">
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <div class="layout">
        <section class="calculator" aria-label="Calculator">
          <div class="display" aria-live="polite" aria-atomic="true">
            <div id="calc-display" class="display-value">0</div>
          </div>
          <div class="button-grid" role="group" aria-label="Calculator buttons">
            <button class="btn btn-utility" data-action="ac" aria-label="All clear">AC</button>
            <button class="btn btn-utility" data-action="clear" aria-label="Clear entry">C</button>
            <button class="btn btn-utility" data-action="backspace" aria-label="Backspace">⌫</button>
            <button class="btn btn-operator" data-operator="/" aria-label="Divide">÷</button>

            <button class="btn" data-number="7">7</button>
            <button class="btn" data-number="8">8</button>
            <button class="btn" data-number="9">9</button>
            <button class="btn btn-operator" data-operator="*" aria-label="Multiply">×</button>

            <button class="btn" data-number="4">4</button>
            <button class="btn" data-number="5">5</button>
            <button class="btn" data-number="6">6</button>
            <button class="btn btn-operator" data-operator="-" aria-label="Subtract">−</button>

            <button class="btn" data-number="1">1</button>
            <button class="btn" data-number="2">2</button>
            <button class="btn" data-number="3">3</button>
            <button class="btn btn-operator" data-operator="+" aria-label="Add">+</button>

            <button class="btn btn-tip" data-action="tip" aria-label="Open tip calculator">Tip</button>
            <button class="btn" data-number="0">0</button>
            <button class="btn" data-number=".">.</button>
            <button class="btn btn-equals" data-action="equals" aria-label="Equals">=</button>
          </div>
        </section>

        <section class="change-panel" aria-label="Change calculator">
          <header class="panel-header">
            <div>
              <h2>Change Calculator</h2>
              <p class="panel-subtitle">Ресто</p>
            </div>
            <div class="currency-toggle" role="group" aria-label="Output currency">
              <button class="toggle-chip active" type="button" data-role="output-currency" data-currency="EUR" aria-pressed="true">
                EUR
              </button>
              <button class="toggle-chip" type="button" data-role="output-currency" data-currency="BGN" aria-pressed="false">
                BGN
              </button>
            </div>
          </header>

          <div class="panel-body">
            <label class="input-group">
              <span class="label">Product price</span>
              <div class="input-row">
                <input
                  id="product-price"
                  type="number"
                  min="0"
                  step="0.01"
                  inputmode="decimal"
                  aria-label="Product price"
                />
                <div class="currency-toggle" role="group" aria-label="Product price currency">
                  <button class="toggle-chip active" type="button" data-role="price-currency" data-currency="EUR" aria-pressed="true">
                    EUR
                  </button>
                  <button class="toggle-chip" type="button" data-role="price-currency" data-currency="BGN" aria-pressed="false">
                    BGN
                  </button>
                </div>
              </div>
            </label>

            <label class="input-group">
              <div class="label-row">
                <span class="label">Paid amount</span>
                <button class="ghost-action" id="use-calc" type="button" aria-label="Use calculator value">
                  Use calc
                </button>
              </div>
              <div class="input-row">
                <input
                  id="paid-amount"
                  type="number"
                  min="0"
                  step="0.01"
                  inputmode="decimal"
                  aria-label="Paid amount"
                />
                <div class="currency-toggle" role="group" aria-label="Paid amount currency">
                  <button class="toggle-chip active" type="button" data-role="paid-currency" data-currency="EUR" aria-pressed="true">
                    EUR
                  </button>
                  <button class="toggle-chip" type="button" data-role="paid-currency" data-currency="BGN" aria-pressed="false">
                    BGN
                  </button>
                </div>
              </div>
            </label>

            <div class="split-toggle">
              <button class="toggle-btn" id="split-toggle" type="button" aria-pressed="false">
                Split payment
              </button>
              <span class="helper-text">Add a second currency payment</span>
            </div>

            <div class="split-fields" id="split-fields">
              <label class="input-group">
                <span class="label">Paid amount (second)</span>
                <div class="input-row">
                  <input
                    id="paid-amount-secondary"
                    type="number"
                    min="0"
                    step="0.01"
                    inputmode="decimal"
                    aria-label="Second paid amount"
                  />
                  <div class="currency-toggle" role="group" aria-label="Second paid amount currency">
                    <button class="toggle-chip active" type="button" data-role="paid-secondary-currency" data-currency="BGN" aria-pressed="true">
                      BGN
                    </button>
                  </div>
                </div>
              </label>
            </div>

            <div class="change-output" aria-live="polite">
              <div class="change-main">
                <span id="change-label" class="result-label">Change</span>
                <span id="change-value" class="change-value">0.00</span>
              </div>
              <div id="change-hint" class="change-hint">
                Add more payment to reach total
              </div>
              <div class="change-breakdown">
                <span>Paid</span>
                <span id="paid-total">0.00</span>
              </div>
              <div class="change-breakdown">
                <span>Price</span>
                <span id="price-total">0.00</span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div class="modal-overlay" id="tip-overlay" aria-hidden="true">
      <div
        class="tip-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="tip-title"
      >
        <header class="tip-header">
          <h2 id="tip-title">Tip & Split</h2>
          <button class="icon-button" id="tip-close" aria-label="Close tip calculator">×</button>
        </header>

        <div class="tip-body">
          <label class="input-group">
            <span class="label">Base amount</span>
            <div class="input-row">
              <span class="prefix">$</span>
              <input
                id="base-amount"
                type="number"
                min="0"
                step="0.01"
                inputmode="decimal"
                aria-label="Base amount"
              />
            </div>
          </label>

          <div class="split-group" aria-label="Split between people">
            <span class="label">People</span>
            <div class="stepper" role="group" aria-label="Number of people">
              <button class="stepper-btn" data-step="-1" aria-label="Decrease people">
                −
              </button>
              <div id="people-count" class="stepper-value" aria-live="polite">1</div>
              <button class="stepper-btn" data-step="1" aria-label="Increase people">
                +
              </button>
            </div>
          </div>

          <div class="tip-section">
            <span class="label">Tip %</span>
            <div class="tip-presets" role="group" aria-label="Tip presets">
              <button class="chip" data-tip="10">10%</button>
              <button class="chip" data-tip="15">15%</button>
              <button class="chip" data-tip="20">20%</button>
              <div class="custom-tip">
                <input
                  id="custom-tip"
                  type="number"
                  min="0"
                  max="50"
                  step="1"
                  inputmode="numeric"
                  aria-label="Custom tip percentage"
                  placeholder="Custom"
                />
                <span class="suffix">%</span>
              </div>
            </div>
          </div>

          <div class="tip-options">
            <label class="round-toggle">
              <input id="round-per-person" type="checkbox" />
              <span class="toggle-track" aria-hidden="true"></span>
              <span class="toggle-label">Round per person</span>
            </label>
            <span id="rounding-note" class="rounding-note">Totals may vary due to rounding.</span>
          </div>

          <div class="results">
            <div class="result-main">
              <span class="result-label">Per person</span>
              <span id="per-person" class="result-value">$0.00</span>
            </div>
            <div class="result-row">
              <span>Tip total</span>
              <span id="tip-total">$0.00</span>
            </div>
            <div class="result-row">
              <span>Total amount</span>
              <span id="total-amount">$0.00</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="install-hint" id="install-hint" role="status" aria-live="polite">
      <span>Install for quick access</span>
      <button class="install-hint-btn" id="install-hint-dismiss" type="button">
        Got it
      </button>
    </div>

    <script src="script.js"></script>
  </body>
</html>
